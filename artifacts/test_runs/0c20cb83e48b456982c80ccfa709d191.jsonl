{"run_id": "0c20cb83e48b456982c80ccfa709d191", "test_id": "test/test_e27_area_get_status_live.py::test_live_area_get_status", "record_type": "test_start", "t_ms": 0, "ts_utc": "2025-12-27T02:49:51Z", "meta": {"pid": 77399}}
{"run_id": "0c20cb83e48b456982c80ccfa709d191", "test_id": "test/test_e27_area_get_status_live.py::test_live_area_get_status", "record_type": "test_end", "t_ms": 30385, "ts_utc": "2025-12-27T02:50:21Z", "outcome": "fail", "error": {"when": "call", "longrepr": "@pytest.mark.integration\n    @pytest.mark.asyncio\n    async def test_live_area_get_status() -> None:\n        host = _require_env(\"ELKE27_HOST\")\n        port = int(_env(\"ELKE27_PORT\", \"2101\") or 2101)\n        access_code = _require_env(\"ELKE27_ACCESS_CODE\")\n        passphrase = _require_env(\"ELKE27_PASSPHRASE\")\n        mn = _require_env(\"ELKE27_MN\")\n        sn = _require_env(\"ELKE27_SN\")\n        fwver = _require_env(\"ELKE27_FWVER\")\n        hwver = _require_env(\"ELKE27_HWVER\")\n        osver = _require_env(\"ELKE27_OSVER\")\n        timeout_s = float(_env(\"ELKE27_TIMEOUT_S\", \"10.0\") or 10.0)\n        area_id = int(_env(\"ELKE27_AREA_ID\", \"1\") or 1)\n    \n        identity = linking.E27Identity(mn=mn, sn=sn, fwver=fwver, hwver=hwver, osver=osver)\n    \n        elk = Elk(features=[\"elke27_lib.features.area\"])\n    \n        panel = {\"host\": host, \"port\": port}\n        creds = _Credentials(access_code=access_code, passphrase=passphrase)\n        link_keys = await elk.link(panel, identity, creds, timeout_s=timeout_s)\n        session_cfg = SessionConfig(host=host, port=port, hello_timeout_s=timeout_s)\n        await elk.connect(link_keys, session_config=session_cfg)\n    \n        pin_value = _env(\"ELKE27_PIN\")\n        if pin_value:\n            pin = int(pin_value)\n            auth_msg = {\"seq\": 110, \"authenticate\": {\"pin\": pin}}\n            elk.session.send_json(auth_msg)\n            auth_reply = elk.session.recv_json(timeout_s=2.0)\n            print(f\"Authenticate reply: {auth_reply}\")\n    \n        seq = elk.request((\"area\", \"get_status\"), area_id=area_id)\n        print(f\"Sent area.get_status seq={seq}\")\n    \n        deadline = time.monotonic() + timeout_s\n        while time.monotonic() < deadline:\n            elk.session.pump_once(timeout_s=0.5)\n            for evt in elk.drain_events():\n                if evt.kind == AreaStatusUpdated.KIND and evt.area_id == area_id:\n                    area = elk.state.areas[area_id]\n                    print(f\"Area {area_id} state: arm_state={area.arm_state} ready_status={area.ready_status}\")\n                    await elk.close()\n                    return\n    \n        await elk.close()\n>       pytest.fail(\"Timed out waiting for AreaStatusUpdated event.\")\nE       Failed: Timed out waiting for AreaStatusUpdated event.\n\ntest/test_e27_area_get_status_live.py:82: Failed"}}
